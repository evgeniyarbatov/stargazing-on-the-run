
// Author: Evgeny Arbatov
// Version: 1.0
// License: Public Domain
// Name: GPX to Stellarium images
// Description: Convert GPX files to Stellarium images

points = [
	{ date: '2022-05-29T06:40:09', timestamp: 1653806409, lat: 1.309428, lon: 103.895445, alt: 9.3, az: 89.25625684021114 },
{ date: '2022-05-29T06:40:59', timestamp: 1653806459, lat: 1.30967, lon: 103.894395, alt: 9.3, az: 282.8980157430511 },
{ date: '2022-05-29T06:41:49', timestamp: 1653806509, lat: 1.309688, lon: 103.89437, alt: 9.3, az: 305.5787721518094 },
{ date: '2022-05-29T06:42:39', timestamp: 1653806559, lat: 1.309695, lon: 103.893438, alt: 9.3, az: 270.4275682024063 },
{ date: '2022-05-29T06:43:29', timestamp: 1653806609, lat: 1.3092, lon: 103.891813, alt: 9.3, az: 253.16125003237119 },
{ date: '2022-05-29T06:44:19', timestamp: 1653806659, lat: 1.30891, lon: 103.89042, alt: 9.3, az: 258.31348903055226 },
{ date: '2022-05-29T06:45:09', timestamp: 1653806709, lat: 1.308988, lon: 103.88937, alt: 9.3, az: 274.22124107081413 },
{ date: '2022-05-29T06:45:59', timestamp: 1653806759, lat: 1.308158, lon: 103.889675, alt: 7.3, az: 159.70314970619813 },
{ date: '2022-05-29T06:46:49', timestamp: 1653806809, lat: 1.306722, lon: 103.890103, alt: 8.2, az: 163.30181885791333 },
{ date: '2022-05-29T06:47:39', timestamp: 1653806859, lat: 1.306207, lon: 103.88861, alt: 8.2, az: 251.0821900940673 },
{ date: '2022-05-29T06:48:29', timestamp: 1653806909, lat: 1.305888, lon: 103.887147, alt: 8.2, az: 257.7762181567464 },
{ date: '2022-05-29T06:49:19', timestamp: 1653806959, lat: 1.305703, lon: 103.885623, alt: 8.2, az: 263.1227820699966 },
{ date: '2022-05-29T06:50:09', timestamp: 1653807009, lat: 1.305252, lon: 103.884212, alt: 7.3, az: 252.38145529666375 },
{ date: '2022-05-29T06:50:59', timestamp: 1653807059, lat: 1.304947, lon: 103.883768, alt: 13.3, az: 235.685774962862 },
{ date: '2022-05-29T06:51:49', timestamp: 1653807109, lat: 1.304505, lon: 103.88343, alt: 9.3, az: 217.58394786305792 },
{ date: '2022-05-29T06:52:39', timestamp: 1653807159, lat: 1.303777, lon: 103.8832, alt: 7.3, az: 197.63961610592037 },
{ date: '2022-05-29T06:53:29', timestamp: 1653807209, lat: 1.302643, lon: 103.882232, alt: 7.3, az: 220.6673102814563 },
{ date: '2022-05-29T06:54:19', timestamp: 1653807259, lat: 1.301445, lon: 103.881298, alt: 7.3, az: 218.12063807748189 },
{ date: '2022-05-29T06:55:09', timestamp: 1653807309, lat: 1.300428, lon: 103.880308, alt: 7.3, az: 224.414150864794 },
{ date: '2022-05-29T06:55:59', timestamp: 1653807359, lat: 1.299287, lon: 103.879232, alt: 7.3, az: 223.50531298017245 },
{ date: '2022-05-29T06:56:49', timestamp: 1653807409, lat: 1.298458, lon: 103.877928, alt: 7.3, az: 237.72167309475225 },
{ date: '2022-05-29T06:57:39', timestamp: 1653807459, lat: 1.297955, lon: 103.876418, alt: 7.3, az: 251.68709028742472 },
{ date: '2022-05-29T06:58:29', timestamp: 1653807509, lat: 1.298022, lon: 103.875182, alt: 7.3, az: 273.0828853858119 },
{ date: '2022-05-29T06:59:19', timestamp: 1653807559, lat: 1.29852, lon: 103.873638, alt: 7.3, az: 287.76875116531147 },
{ date: '2022-05-29T07:00:09', timestamp: 1653807609, lat: 1.298653, lon: 103.872252, alt: 7.3, az: 275.4462486333237 },
{ date: '2022-05-29T07:00:59', timestamp: 1653807659, lat: 1.299007, lon: 103.871258, alt: 8.2, az: 289.4860736793317 },
{ date: '2022-05-29T07:01:49', timestamp: 1653807709, lat: 1.298333, lon: 103.871353, alt: 8.2, az: 171.92575073777186 },
{ date: '2022-05-29T07:02:39', timestamp: 1653807759, lat: 1.297898, lon: 103.869965, alt: 8.2, az: 252.70428698263294 },
{ date: '2022-05-29T07:03:29', timestamp: 1653807809, lat: 1.297975, lon: 103.868253, alt: 8.2, az: 272.55870300101344 },
{ date: '2022-05-29T07:04:19', timestamp: 1653807859, lat: 1.298467, lon: 103.86711, alt: 8.2, az: 293.1552399332792 },
{ date: '2022-05-29T07:05:09', timestamp: 1653807909, lat: 1.29757, lon: 103.866138, alt: 8.2, az: 227.48229700805535 },
{ date: '2022-05-29T07:05:59', timestamp: 1653807959, lat: 1.296062, lon: 103.865998, alt: 8.2, az: 185.33819756952732 },
{ date: '2022-05-29T07:06:49', timestamp: 1653808009, lat: 1.294762, lon: 103.866318, alt: 7.3, az: 166.08522393885357 },
{ date: '2022-05-29T07:07:39', timestamp: 1653808059, lat: 1.293317, lon: 103.866748, alt: 8.2, az: 163.32672401192687 },
{ date: '2022-05-29T07:08:29', timestamp: 1653808109, lat: 1.291803, lon: 103.867212, alt: 7.3, az: 162.85715413225998 },
{ date: '2022-05-29T07:09:19', timestamp: 1653808159, lat: 1.290437, lon: 103.867777, alt: 8.2, az: 157.3981864912626 },
{ date: '2022-05-29T07:10:09', timestamp: 1653808209, lat: 1.289047, lon: 103.868472, alt: 8.2, az: 153.2865993261331 },
{ date: '2022-05-29T07:10:59', timestamp: 1653808259, lat: 1.287683, lon: 103.86927, alt: 8.2, az: 149.5088827370756 },
{ date: '2022-05-29T07:11:49', timestamp: 1653808309, lat: 1.28655, lon: 103.86996, alt: 7.3, az: 148.49376689014193 },
{ date: '2022-05-29T07:12:39', timestamp: 1653808359, lat: 1.285307, lon: 103.870908, alt: 7.3, az: 142.4896038161933 },
{ date: '2022-05-29T07:13:29', timestamp: 1653808409, lat: 1.284168, lon: 103.87196, alt: 7.3, az: 137.08929954612861 },
{ date: '2022-05-29T07:14:19', timestamp: 1653808459, lat: 1.283262, lon: 103.873162, alt: 7.3, az: 126.82910035184877 },
{ date: '2022-05-29T07:15:09', timestamp: 1653808509, lat: 1.282262, lon: 103.874227, alt: 7.3, az: 133.0123414060315 },
{ date: '2022-05-29T07:15:59', timestamp: 1653808559, lat: 1.281252, lon: 103.875302, alt: 8.2, az: 133.02960537514764 },
{ date: '2022-05-29T07:16:49', timestamp: 1653808609, lat: 1.281217, lon: 103.875827, alt: 8.2, az: 93.78956803822759 },
{ date: '2022-05-29T07:17:39', timestamp: 1653808659, lat: 1.281555, lon: 103.87469, alt: 8.2, az: 286.45495642708295 },
{ date: '2022-05-29T07:18:29', timestamp: 1653808709, lat: 1.28202, lon: 103.873475, alt: 8.2, az: 290.81934144610784 },
{ date: '2022-05-29T07:19:19', timestamp: 1653808759, lat: 1.281182, lon: 103.8723, alt: 10.2, az: 234.67875091299857 },
{ date: '2022-05-29T07:20:09', timestamp: 1653808809, lat: 1.280678, lon: 103.871627, alt: 8.2, az: 233.34852190150252 },
{ date: '2022-05-29T07:20:59', timestamp: 1653808859, lat: 1.280957, lon: 103.870135, alt: 14.3, az: 280.52513451091727 },
{ date: '2022-05-29T07:21:49', timestamp: 1653808909, lat: 1.281192, lon: 103.870948, alt: 19.2, az: 73.97642259220578 },
{ date: '2022-05-29T07:22:39', timestamp: 1653808959, lat: 1.279918, lon: 103.871202, alt: 19.2, az: 168.6534372944957 },
{ date: '2022-05-29T07:23:29', timestamp: 1653809009, lat: 1.279777, lon: 103.870362, alt: 16.3, az: 260.5316142030325 },
{ date: '2022-05-29T07:24:19', timestamp: 1653809059, lat: 1.280362, lon: 103.87092, alt: 19.2, az: 43.83180092823903 },
{ date: '2022-05-29T07:25:09', timestamp: 1653809109, lat: 1.281097, lon: 103.87028, alt: 14.3, az: 318.76885165604614 },
{ date: '2022-05-29T07:25:59', timestamp: 1653809159, lat: 1.280753, lon: 103.871627, alt: 9.3, az: 104.23756778200422 },
{ date: '2022-05-29T07:26:49', timestamp: 1653809209, lat: 1.281608, lon: 103.872808, alt: 9.3, az: 54.2725794328605 },
{ date: '2022-05-29T07:27:39', timestamp: 1653809259, lat: 1.282623, lon: 103.873465, alt: 8.2, az: 33.08374235051984 },
{ date: '2022-05-29T07:28:29', timestamp: 1653809309, lat: 1.28341, lon: 103.872652, alt: 6.2, az: 313.8840077821686 },
{ date: '2022-05-29T07:29:19', timestamp: 1653809359, lat: 1.284522, lon: 103.87157, alt: 7.3, az: 315.5983256684361 },
{ date: '2022-05-29T07:30:09', timestamp: 1653809409, lat: 1.285692, lon: 103.870648, alt: 7.3, az: 321.58056660340975 },
{ date: '2022-05-29T07:30:59', timestamp: 1653809459, lat: 1.286897, lon: 103.869785, alt: 7.3, az: 324.2149976822281 },
{ date: '2022-05-29T07:31:49', timestamp: 1653809509, lat: 1.28816, lon: 103.868967, alt: 7.3, az: 326.9011913780859 },
{ date: '2022-05-29T07:32:39', timestamp: 1653809559, lat: 1.28926, lon: 103.868328, alt: 8.2, az: 329.6862816280749 },
{ date: '2022-05-29T07:33:29', timestamp: 1653809609, lat: 1.290583, lon: 103.867708, alt: 7.3, az: 334.74820425770577 },
{ date: '2022-05-29T07:34:19', timestamp: 1653809659, lat: 1.291812, lon: 103.86727, alt: 7.3, az: 340.26725432890714 },
{ date: '2022-05-29T07:35:09', timestamp: 1653809709, lat: 1.293262, lon: 103.86674, alt: 7.3, az: 339.80215580013794 },
{ date: '2022-05-29T07:35:59', timestamp: 1653809759, lat: 1.294557, lon: 103.866438, alt: 7.3, az: 346.79089263524753 },
{ date: '2022-05-29T07:36:49', timestamp: 1653809809, lat: 1.296022, lon: 103.865975, alt: 6.2, az: 342.3547351637028 },
{ date: '2022-05-29T07:37:39', timestamp: 1653809859, lat: 1.297543, lon: 103.86611, alt: 6.2, az: 5.104816586056182 },
{ date: '2022-05-29T07:38:29', timestamp: 1653809909, lat: 1.298568, lon: 103.86704, alt: 6.2, az: 42.40214244113481 },
{ date: '2022-05-29T07:39:19', timestamp: 1653809959, lat: 1.297987, lon: 103.868118, alt: 6.2, az: 118.16869588938431 },
{ date: '2022-05-29T07:40:09', timestamp: 1653810009, lat: 1.297957, lon: 103.869548, alt: 6.2, az: 91.19408408005752 },
{ date: '2022-05-29T07:40:59', timestamp: 1653810059, lat: 1.298212, lon: 103.870818, alt: 6.2, az: 78.71786982258025 },
{ date: '2022-05-29T07:41:49', timestamp: 1653810109, lat: 1.29896, lon: 103.871688, alt: 6.2, az: 49.494817964962294 },
{ date: '2022-05-29T07:42:39', timestamp: 1653810159, lat: 1.299245, lon: 103.871877, alt: 6.2, az: 33.72125866679064 },
{ date: '2022-05-29T07:43:29', timestamp: 1653810209, lat: 1.298482, lon: 103.872817, alt: 6.2, az: 128.88541142108858 },
{ date: '2022-05-29T07:44:19', timestamp: 1653810259, lat: 1.298437, lon: 103.873952, alt: 6.2, az: 92.25583971174844 },
{ date: '2022-05-29T07:45:09', timestamp: 1653810309, lat: 1.298082, lon: 103.87529, alt: 6.2, az: 104.76797398665722 },
{ date: '2022-05-29T07:45:59', timestamp: 1653810359, lat: 1.29805, lon: 103.876453, alt: 5.3, az: 91.56594655459483 },
{ date: '2022-05-29T07:46:49', timestamp: 1653810409, lat: 1.298562, lon: 103.878058, alt: 4.3, az: 72.41396768964562 },
{ date: '2022-05-29T07:47:39', timestamp: 1653810459, lat: 1.299178, lon: 103.879003, alt: 4.3, az: 57.070604926878744 },
{ date: '2022-05-29T07:48:29', timestamp: 1653810509, lat: 1.300192, lon: 103.879988, alt: 4.3, az: 44.35373584772014 },
{ date: '2022-05-29T07:49:19', timestamp: 1653810559, lat: 1.301263, lon: 103.880972, alt: 4.3, az: 42.760105902806444 },
{ date: '2022-05-29T07:50:09', timestamp: 1653810609, lat: 1.302392, lon: 103.881877, alt: 4.3, az: 38.89607889587623 },
{ date: '2022-05-29T07:50:59', timestamp: 1653810659, lat: 1.303273, lon: 103.882732, alt: 4.3, az: 44.32679026104868 },
{ date: '2022-05-29T07:51:49', timestamp: 1653810709, lat: 1.304232, lon: 103.883623, alt: 4.3, az: 43.07938205863183 },
{ date: '2022-05-29T07:52:39', timestamp: 1653810759, lat: 1.304448, lon: 103.883377, alt: 6.2, az: 311.10144287665196 },
{ date: '2022-05-29T07:53:29', timestamp: 1653810809, lat: 1.305077, lon: 103.883915, alt: 9.3, az: 40.723973862955525 },
{ date: '2022-05-29T07:54:19', timestamp: 1653810859, lat: 1.30496, lon: 103.884122, alt: 4.3, az: 119.3177463509783 },
{ date: '2022-05-29T07:55:09', timestamp: 1653810909, lat: 1.30539, lon: 103.885003, alt: 3.2, az: 64.12930348334444 },
{ date: '2022-05-29T07:55:59', timestamp: 1653810959, lat: 1.305587, lon: 103.886345, alt: 3.2, az: 81.70182137766733 },
{ date: '2022-05-29T07:56:49', timestamp: 1653811009, lat: 1.305797, lon: 103.88731, alt: 3.2, az: 77.79949576082662 },
{ date: '2022-05-29T07:57:39', timestamp: 1653811059, lat: 1.30608, lon: 103.888688, alt: 3.2, az: 78.46715934402337 },
{ date: '2022-05-29T07:58:29', timestamp: 1653811109, lat: 1.306508, lon: 103.88989, alt: 3.2, az: 70.51708804352853 },
{ date: '2022-05-29T07:59:19', timestamp: 1653811159, lat: 1.307547, lon: 103.8901, alt: 3.2, az: 11.498547358520954 },
{ date: '2022-05-29T08:00:09', timestamp: 1653811209, lat: 1.308635, lon: 103.89028, alt: 3.2, az: 9.453707762556341 },
{ date: '2022-05-29T08:00:59', timestamp: 1653811259, lat: 1.308868, lon: 103.891333, alt: 3.2, az: 77.60080058168052 },
{ date: '2022-05-29T08:01:49', timestamp: 1653811309, lat: 1.309147, lon: 103.892567, alt: 3.2, az: 77.33924453282941 },
{ date: '2022-05-29T08:02:39', timestamp: 1653811359, lat: 1.30935, lon: 103.893657, alt: 3.2, az: 79.51651271530918 },
{ date: '2022-05-29T08:03:29', timestamp: 1653811409, lat: 1.309415, lon: 103.89445, alt: 3.2, az: 85.3440953937461 }
];

core.clear("natural");
core.setGuiVisible(false);

StelMovementMgr.zoomTo(180, 1);

GridLinesMgr.setFlagEquatorGrid(false);

LandscapeMgr.setFlagLandscape(false);
LandscapeMgr.setFlagAtmosphere(true);

ConstellationMgr.setFlagLines(true);
ConstellationMgr.setFlagLabels(true);
ConstellationMgr.setFlagArt(true);

SolarSystem.setFlagPlanets(true);
SolarSystem.setFlagLabels(true);

StarMgr.setFlagStars(true);
StarMgr.setFlagLabels(true);

MilkyWay.setFlagShow(true);
MilkyWay.setIntensity(5);

SporadicMeteorMgr.setFlagShow(true);

NebulaMgr.setFlagShow(true);

points.forEach(
	function(point) {
		core.moveToAltAzi(point.alt, point.az)
		core.wait(0.01);

		core.setObserverLocation(
			point.long, 
			point.lat, 
			point.alt
		);

		core.setDate(point.date, "local");

		core.setTimeRate(0);
		core.wait(1);

		core.screenshot(
			"sky_" + point.timestamp, 
			false,
			"/Users/arbatov/gitRepo/stargazing-on-the-run/tmp/sky_images",
			true,
			"jpeg"
		);
	}
);

core.quitStellarium();
	